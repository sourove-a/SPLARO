AddType image/svg+xml .svg
AddType image/x-icon .ico
AddType application/manifest+json .webmanifest

DirectoryIndex index.php index.html

<IfModule mod_authz_core.c>
  Require all granted
</IfModule>

<IfModule mod_headers.c>
  # Prevent stale HTML/manifest/service-worker cache after deployments.
  <FilesMatch "^(index\.php|index\.html|push-sw\.js|site\.webmanifest)$">
    Header set Cache-Control "no-store, no-cache, must-revalidate, max-age=0"
    Header set Pragma "no-cache"
    Header set Expires "0"
  </FilesMatch>
</IfModule>

<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /

  # Force HTTPS Handshake
  RewriteCond %{HTTPS} off
  RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

  # Emergency fallback: prevent /admin directory 403 on main domain.
  RewriteRule ^admin/?$ /sourove-admin [R=302,L]

  RewriteRule ^index\.html$ /index.php [R=302,L]
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule . /index.php [L]
</IfModule>
